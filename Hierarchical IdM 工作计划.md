# 关于主侧链DLT-Based IdM的程序设计

**config文件** 不需要保留原有的卫星、跳数等参数。 需要分为SP\UE两种节点。同时，主节点127.0.0.1008负责打包区块，其身份不需要被IdM监管。

### 工作计划

#### 24.01.15

完成了整个项目的区块链层重构，能够脱离原始blockchain_platform平台进行基础区块链层PBFT

#### 24.01.16

- 创建主侧链的创世块过程 
- 完成主侧链区块更新及读取的过程
- 搭建完成主侧链对应的交易生成及共识流程，但节点生成后不进行下一步操作

#### 24.01.17

- 交易池打包发送 更改为监听管道 满足阈值发送
- 测试共识过程中，节点间延迟过小，考虑每一步骤中加入一个随机时延
- 主链功能测试OK，但侧链一直进不去

#### 24.01.18

- 打log，了解每一步都是否正常进行
- **初始主侧链版本提交** Github:主侧链模型v1.0
- 侧链动态密钥交易改为随机选择的某一对区块中的某一对ID，并完成所选择的一对主链ID交易对侧链动态密钥交易的映射。
- BlockchainLayer/Blockchain/Blockchain.go:265 从主链获取反序列化区块数据有Bug, []byte to block failed EOF.

#### 24.01.19

- 完成根据主链ID生成侧链动态密钥交易并上链的功能。
- 设置ID块ID交易向侧链具体动态密钥交易的映射中
- 选取ID交易后，先确定选定的这一对ID是否已有动态密钥。有则直接跳过当前步骤；
- 怎么确定随机选定的两个ID生成动态密钥后，生成的密钥将会存储在侧链的第几区块第几交易？

- 侧链交易一直生成失败

#### 24.01.20

- 生成侧链区块时，消息摘要与DigestPool对不上，无法共识

#### 24.01.23

- 完成主侧链交易间的映射，但只局限于主链交易对侧链区块的映射

#### 24.01.24

- 在生成动态公钥前，先查询随机选择的ID是否都有对侧链区块的映射。没有才需要选择，有则直接进行侧链区块查找。（可以作为应用层功能）
- 要完成主链交易对侧链交易的直接映射，首先需要在侧链交易中添加编号，在交易排序时根据编号排序。
- ==待验证== 侧链交易能够按照序号在区块中排序，且完成了主链交易对侧链交易的直接映射。

#### 24.01.26 

- 搭建应用层，验证主链交易是否能对侧脸交易进行直接映射，且主侧链中的具体交易形式及排序方式。
- 应用层获取交易失败
- 主链ID在动态密钥函数内完成mapping赋值后，并没有在全局完成更改。非指针问题。
- 区块的CRUD逻辑有误。应该往自身节点上进行CRUD